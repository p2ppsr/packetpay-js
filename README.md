# @packetpay/js

A fetch client capable of paying for its requests

The code is available [on GitHub](https://github.com/p2ppsr/packetpay-js) and the package is published [on NPM](https://www.npmjs.com/package/@packetpay/js).

## Overview

[PacketPay](https://projectbabbage.com/packetpay) is a system for making HTTP requests monetized using BSV micropayments.

The PacketPay client makes a pre-flight request to the server endpoint. If a 402 error is encountered, the client pays the server for the request and the response is returned. If the server does not charge for the response, the response is retured as normal. The [Babbage SDK](https://projectbabbage.com/sdk) is used for payment.

There is a complementary [server middleware](https://github.com/p2ppsr/packetpay-express) for accepting these payments.

## Installation

    npm i @packetpay/js

## Example Usage

This example demonstrates a simple request with **@packetpay/js**

```js
const PacketPay = require('@packetpay/js')

const newsArticle = await PacketPay(
  'https://decent-news-site.com/article/2009/Jan/chancellor-on-brink.html'
)
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

*   [client](#client)
    *   [Parameters](#parameters)

### client

#### Parameters

*   `url` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** The request URL
*   `fetchConfig` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** The fetch configuration object (optional, default `{}`)
*   `config` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** PacketPay configuration object, optional of Babbage SDK is used (optional, default `{}`)

    *   `config.authriteConfig` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Constructor parameters for Authrite
    *   `config.ninjaConfig` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?** Constructor parameters for Ninja
    *   `config.clientPrivateKey` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** Client private key, used with both Authrite and Ninja if provided
    *   `config.description` **[String](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** Payment description, if a non-default description is desired

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)<[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)>** Containing `status`, `headers` and `body`

## License

The license for the code in this repository is the Open BSV License.
